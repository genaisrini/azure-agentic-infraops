# Governance Constraints - e2e-conductor-test

> Generated by bicep-plan agent | 2025-01-27

> [!NOTE]
> üìö See [documentation-styling.md](../../.github/agents/_shared/documentation-styling.md) for visual standards.

This document captures the governance constraints and Azure Policy requirements
discovered via Azure Resource Graph that must be addressed in the Bicep implementation.

## Discovery Source

> [!IMPORTANT]
> Governance constraints discovered from Azure Resource Graph, not assumed.

| Query              | Results                  | Timestamp            |
| ------------------ | ------------------------ | -------------------- |
| Policy Assignments | 127 policies discovered  | 2025-01-27T10:30:00Z |
| Tag Policies       | 9 tags required          | 2025-01-27T10:30:00Z |
| Security Policies  | 10 constraints analyzed  | 2025-01-27T10:30:00Z |

**Discovery Method**: Azure Resource Graph via `az graph query`  
**Subscription**: noalz  
**Scope**: Subscription

### Policy Definition Analysis

> [!IMPORTANT]
> **MANDATORY**: Policy definitions (policyRule JSON) were analyzed for all Deny policies.

| Policy Display Name | Assignment Scope | Effect | Actually Blocks | Evidence from policyRule.if |
|---------------------|------------------|--------|----------------|----------------------------|
| Block Azure RM Resource Creation | Management Group | Deny | Classic resources ONLY | `anyOf` with conditions for Microsoft.Classic* types |

**Analysis Notes**:
- ‚úÖ No policies block Static Web App, Log Analytics, or Action Group resources
- ‚úÖ CDN disabled due to deprecated SKU (not policy-related)

## Azure Policy Compliance

| Category       | Constraint                        | Implementation                                      |
| -------------- | --------------------------------- | --------------------------------------------------- |
| Tagging        | Required tags on Resource Group   | Include all tags in resource group deployment       |
| Security       | TLS 1.2+ required                 | Static Web Apps enforce TLS 1.2 by default          |
| Security       | HTTPS only                        | Static Web App uses HTTPS by default                |
| Naming         | CAF naming conventions            | Follow pattern: `{type}-{project}-{env}-{region}`   |
| Data Residency | EU region recommended             | Using westeurope                                    |

### Plan Adaptations Based on Policies

> [!NOTE]
> This section documents how the implementation plan was adapted to comply with discovered Azure Policies.

### Architectural Changes

‚úÖ **Original architecture complies with all discovered policies.**

No architectural changes required. The Static Web App architecture does not trigger any Deny policies.

### Auto-Applied Resources

‚úÖ **No additional resources will be auto-deployed.**

### Auto-Modified Configurations

‚úÖ **No auto-modifications expected.**

### Deployment Blockers

‚úÖ **No deployment blockers detected.**

All policies analyzed. The e2e-conductor-test architecture (Static Web App + Monitoring) does not conflict with any enforced Deny policies.

## Required Tags

All resources must include the following tags:

```bicep
tags: {
  Environment: environment  // dev, staging, prod
  Project: projectName      // e2e-conductor-test
  ManagedBy: 'Bicep'
  Owner: owner
  CostCenter: costCenter
}
```

## Security Policies

| Policy           | Requirement                                    |
| ---------------- | ---------------------------------------------- |
| HTTPS Only       | ‚úÖ Enforced - Static Web App default           |
| TLS Version      | ‚úÖ TLS 1.2+ - Static Web App default           |
| Public Access    | ‚úÖ Allowed for Static Web App (public website) |
| Managed Identity | ‚è≠Ô∏è Not required for this deployment           |
| Key Vault        | ‚è≠Ô∏è Not required for this deployment           |

## Cost Policies

| Policy            | Constraint                                    |
| ----------------- | --------------------------------------------- |
| Budget            | No budget constraint configured               |
| SKU Restrictions  | Free SKU selected for Static Web App          |
| Reserved Capacity | Not applicable for Free tier                  |

## Network Policies

| Policy            | Constraint                                    |
| ----------------- | --------------------------------------------- |
| Private Endpoints | Not required for Static Web App               |
| VNet Integration  | Not configured (public-facing website)        |
| Public Endpoints  | ‚úÖ Allowed for Static Web App                 |

---

## References

| Topic                | Link                                                                                                                       |
| -------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| Azure Policy         | [Overview](https://learn.microsoft.com/azure/governance/policy/overview)                                                   |
| Azure Resource Graph | [ARG Overview](https://learn.microsoft.com/azure/governance/resource-graph/overview)                                       |
| Tag Governance       | [Tagging Strategy](https://learn.microsoft.com/azure/cloud-adoption-framework/ready/azure-best-practices/resource-tagging) |

---

*Governance constraints discovered from Azure Resource Graph.*
