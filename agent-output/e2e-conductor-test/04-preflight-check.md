# Step 4b: Pre-Flight AVM Check - e2e-conductor-test

> Generated by bicep-code agent | 2025-01-27
> Status: **PASS**

> [!NOTE]
> üìö See [documentation-styling.md](../../.github/agents/_shared/documentation-styling.md) for visual standards.

## Purpose

> [!IMPORTANT]
> This checkpoint validates AVM module schemas BEFORE Bicep code generation.

Prevents:

- Parameter type mismatches (string vs int)
- Deprecated parameter usage
- Region availability issues
- Object structure errors

## AVM Schema Validation Results

| Resource          | AVM Module Path                               | Version | Status |
| ----------------- | --------------------------------------------- | ------- | ------ |
| Static Web App    | `br/public:avm/res/web/static-site`           | 0.5.1   | ‚úÖ     |
| Log Analytics     | `br/public:avm/res/operational-insights/workspace` | 0.8.1 | ‚úÖ     |
| Action Group      | `br/public:avm/res/insights/action-group`     | 0.3.1   | ‚úÖ     |
| CDN Profile       | `br/public:avm/res/cdn/profile`               | 0.8.1   | ‚è≠Ô∏è Skipped (deprecated SKU) |

## Parameter Type Analysis

| Resource          | Parameter          | Expected Type | Notes                    |
| ----------------- | ------------------ | ------------- | ------------------------ |
| Static Web App    | `sku`              | `string`      | 'Free' or 'Standard'     |
| Log Analytics     | `retentionInDays`  | `int`         | Default 30               |
| Action Group      | `groupShortName`   | `string`      | Max 12 characters        |
| CDN Profile       | `sku`              | `object`      | Deprecated - not used    |

## Region Limitations Identified

| Resource         | Default Region  | Limitation                     | Action              |
| ---------------- | --------------- | ------------------------------ | ------------------- |
| Static Web App   | swedencentral   | Not supported in swedencentral | Hardcode westeurope |
| Deployment Scope | swedencentral   | No limitation                  | Use as-is           |

## Pitfalls Checklist

Based on [avm-pitfalls.md](../../.github/agents/_shared/avm-pitfalls.md):

- [x] Static Web App location hardcoded to supported region (westeurope)
- [x] Log Analytics uses correct parameter types
- [x] Action Group short name within 12 character limit
- [x] CDN disabled due to deprecated Standard_Microsoft SKU
- [x] Conditional module syntax used for optional resources

## Ready for Implementation

| Check                      | Status | Notes                            |
| -------------------------- | ------ | -------------------------------- |
| All AVM modules verified   | ‚úÖ     | 3 modules validated              |
| Parameter types confirmed  | ‚úÖ     | All types match AVM schemas      |
| Region limitations handled | ‚úÖ     | westeurope for Static Web App    |
| Pitfalls addressed         | ‚úÖ     | CDN disabled, regions correct    |

**Overall Status**: ‚úÖ **READY**

---

_Pre-flight validation for e2e-conductor-test Bicep implementation_
