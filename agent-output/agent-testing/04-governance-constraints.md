# Governance Constraints - agent-testing

> Generated by bicep-plan agent | 2025-02-04

> [!NOTE]
> ðŸ“š See [documentation-styling.md](../../.github/agents/_shared/documentation-styling.md) for visual standards.

This document captures the governance constraints and Azure Policy requirements
that must be addressed in the Bicep implementation.

## Discovery Source

| Query              | Results                 | Timestamp            |
| ------------------ | ----------------------- | -------------------- |
| Policy Assignments | 5 policies discovered   | 2025-02-04T14:50:00Z |
| Tag Policies       | 0 explicit tag policies | 2025-02-04T14:50:00Z |
| Security Policies  | 3 security constraints  | 2025-02-04T14:50:00Z |

**Discovery Method**: Azure CLI + Azure Resource Graph via MCP
**Subscription**: noalz (00858ffc-dded-4f0f-8bbf-e17fff0d47d9)
**Scope**: Subscription

## Azure Policy Compliance

| Category   | Constraint                                  | Implementation                             |
| ---------- | ------------------------------------------- | ------------------------------------------ |
| Compliance | EU GDPR 2016/679                            | Deploy to EU region (swedencentral)        |
| Compliance | PCI DSS v4                                  | Enable encryption, TLS 1.2+, audit logging |
| Security   | ASC DataProtection                          | Enable soft delete, encryption at rest     |
| Security   | ASC OpenSourceRelationalDatabasesProtection | Azure AD-only auth for SQL                 |
| Security   | Defender for SQL Servers                    | Enable auditing on SQL                     |

## Required Tags

All resources must include the following tags:

```bicep
tags: {
  Environment: environment  // dev, staging, prod
  Project: 'agent-testing'
  ManagedBy: 'Bicep'
  Owner: owner
}
```

> **Note**: No explicit tag enforcement policies detected. Using baseline tags from CAF standards.

## Security Policies

| Policy             | Requirement                             |
| ------------------ | --------------------------------------- |
| HTTPS Only         | All web resources must enforce HTTPS    |
| TLS Version        | Minimum TLS 1.2 for all services        |
| Public Access      | Disabled for storage blob public access |
| Managed Identity   | Preferred over connection strings       |
| Key Vault          | RBAC authorization, soft delete enabled |
| SQL Authentication | Azure AD-only (no SQL passwords)        |

## Cost Policies

| Policy            | Constraint                         |
| ----------------- | ---------------------------------- |
| Budget            | No explicit budget policy detected |
| SKU Restrictions  | No SKU restrictions detected       |
| Reserved Capacity | N/A for dev environment            |
| Optimization      | Use Basic/Free tiers for non-prod  |

## Network Policies

| Policy            | Constraint                                 |
| ----------------- | ------------------------------------------ |
| Private Endpoints | Not required for dev environment           |
| VNet Integration  | Not required for dev environment           |
| Public Endpoints  | Allowed for dev (restrict in staging/prod) |

---

## References

| Topic                | Link                                                                                                                       |
| -------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| Azure Policy         | [Overview](https://learn.microsoft.com/azure/governance/policy/overview)                                                   |
| Azure Resource Graph | [ARG Overview](https://learn.microsoft.com/azure/governance/resource-graph/overview)                                       |
| Tag Governance       | [Tagging Strategy](https://learn.microsoft.com/azure/cloud-adoption-framework/ready/azure-best-practices/resource-tagging) |

---

_Governance constraints discovered from Azure subscription noalz._
_See [governance-discovery.instructions.md](../../.github/instructions/governance-discovery.instructions.md) for discovery methodology._
